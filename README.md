#  Parking Management System API

[![Quality](https://img.shields.io/badge/Implementation-Best--Practice-blue)](https://github.com/Viateur-akimana/Rest-backend-starter)
[![Node.js](https://img.shields.io/badge/Node.js-v20-green)](https://nodejs.org/)
[![Terraform](https://img.shields.io/badge/Terraform-1.5%2B-purple)](https://www.terraform.io/)
[![Ansible](https://img.shields.io/badge/Ansible-2.15-red)](https://www.ansible.com/)

A professional, production-ready RESTful backend for a Parking Management System. This project showcases a modern DevOps lifecycle, from **Modular Infrastructure as Code** to **Hardened Configuration Management** and **Automated CI/CD Pipelines**.

---

## üöÄ Key Architectural Features

### üèóÔ∏èInfrastructure & Cloud
- **Modular Terraform**: Clean separation between Network (VPC/Subnets) and Compute (EC2/Security Groups).
- **Dynamic AMI Lookup**: Automatically pulls the latest verified Ubuntu 22.04 LTS image.
- **Remote State Management**: Secure state locking using AWS S3 and DynamoDB.

### üõ°Ô∏è Security & Hardening
- **Nginx Proxy**: Reverse proxy with reinforced security headers and rate limiting.
- **Server Hardening**: Ansible-driven UFW firewall configuration and `fail2ban` integration.
- **Automated Patching**: `unattended-upgrades` enabled for critical OS security patches.
- **Zero-Secret Policy**: Strict environment variable management via GitHub Secrets.

### ‚öôÔ∏è DevOps & Pipeline
- **3-Stage CI/CD**: 
  1. **Test & Build**: Linting, Type-checking, and Unit Testing.
  2. **Infrastructure**: Automatic provisioning of AWS resources.
  3. **Deployment**: Configuration management via Ansible and Docker orchestration.

---

## üõ†Ô∏è Stack Overview

| Category | Technology |
| :--- | :--- |
| **Backend** | Node.js, TypeScript, Express.js |
| **Persistence** | MySQL 8.0, Prisma ORM |
| **Validation** | Zod, Swagger (OpenAPI 3.0) |
| **Infrastructure** | Terraform, Ansible |
| **Containerization** | Docker, Docker Compose |
| **Communication** | JWT (Auth), Winston (Logs) |

---

## üì¶ Getting Started

### 1. Local Development

1. **Install Dependencies**:
   ```bash
   npm install
   ```
2. **Environment Setup**:
   Copy `.env.example` to `.env` and configure your local database credentials.
3. **Database Migration**:
   ```bash
   npx prisma migrate dev
   ```
4. **Run Server**:
   ```bash
   npm run dev
   ```

### 2. Infrastructure Setup (One-time)

Before deploying to AWS, initialize the remote state backend:

```bash
chmod +x scripts/setup-backend.sh
./scripts/setup-backend.sh
```

---

## üö¢ Deployment Configuration

### Mandatory GitHub Secrets & Variables

To enable the automated pipeline, register the following in your GitHub Repository settings (\`Settings > Secrets and variables > Actions\`):

#### üîê Secrets Tab
| Secret Name | Description |
| :--- | :--- |
| \`AWS_ACCESS_KEY_ID\` | IAM User Access Key |
| \`AWS_SECRET_ACCESS_KEY\` | IAM User Secret Key |
| \`TF_STATE_BUCKET\` | S3 Bucket for State (Generated by script) |
| \`TF_STATE_TABLE\` | DynamoDB Table for Locking (Generated by script) |
| \`EC2_USERNAME\` | SSH username (default: \`ubuntu\`) |
| \`AWS_KEY_NAME\` | Name of the key pair in AWS Console |
| \`MYSQL_ROOT_PASSWORD\` | Database root credential |
| \`MYSQL_DATABASE\` | Database name (e.g., \`parking_db\`) |
| \`JWT_SECRET\` | Secret for token signing |

#### ‚öôÔ∏è Variables Tab
| Variable Name | Description | Recommended Value |
| :--- | :--- | :--- |
| \`PROJECT_NAME\` | Resource labeling prefix | \`rest-backend-starter\` |
| \`AWS_REGION\` | Deployment region | \`us-east-1\` |
| \`INSTANCE_TYPE\` | EC2 Hardware size | \`t3.small\` |

---

## üìù API Documentation

Swagger UI is available for interactive testing:

- **Development**: `http://localhost:3000/api/docs`
- **Production**: `http://<EC2_PUBLIC_IP>/api/docs`

---

## ‚öñÔ∏è License & Security

- Distributed under the **MIT License**. See `LICENSE` for more information.
- For security concerns, please refer to our **SECURITY.md** policy.
